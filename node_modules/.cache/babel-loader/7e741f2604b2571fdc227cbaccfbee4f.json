{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\srini\\\\OneDrive\\\\Desktop\\\\vedenta\\\\vedanta-multi-sensor\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _asyncToGenerator from\"C:\\\\Users\\\\srini\\\\OneDrive\\\\Desktop\\\\vedenta\\\\vedanta-multi-sensor\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\srini\\\\OneDrive\\\\Desktop\\\\vedenta\\\\vedanta-multi-sensor\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\srini\\\\OneDrive\\\\Desktop\\\\vedenta\\\\vedanta-multi-sensor\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from\"react\";import{useState,useEffect}from\"react\";import\"../reports/reportpopup.scss\";import*as XLSX from\"xlsx\";import pdfMake from\"pdfmake/build/pdfmake\";import pdfFonts from\"pdfmake/build/vfs_fonts\";import{saveAs}from\"file-saver\";// import logo from \"../../assets/images/download.jpg\";\nimport PictureAsPdfIcon from'@mui/icons-material/PictureAsPdf';import TextSnippetIcon from'@mui/icons-material/TextSnippet';// class level\n// Register fonts for pdfmake\nimport{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";pdfMake.vfs=pdfFonts.pdfMake.vfs;var generateData=function generateData(inforeport,startSensorIndex,endSensorIndex){var data=[];for(var index=0;index<inforeport.length;index++){for(var i=startSensorIndex;i<=endSensorIndex;i++){if(i<=108){var _inforeport$index;data.push({id:\"\".concat(i),sensor:\"Sensor \".concat(i),sensorName:\"CBT\".concat(i),updatedAt:(_inforeport$index=inforeport[index])===null||_inforeport$index===void 0?void 0:_inforeport$index.updatedAt});}}return data;}};// function\nvar ReportPopup=function ReportPopup(_ref){var Openreportdash=_ref.Openreportdash,Closereportdash=_ref.Closereportdash,waveGuide=_ref.waveGuide;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),inforeport=_useState2[0],setInforeport=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],SetError=_useState4[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,infoVal;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:4000/sensor/find\");case 3:response=_context.sent;_context.next=6;return response.json();case 6:infoVal=_context.sent;setInforeport(infoVal);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);SetError(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);if(!Openreportdash){return null;}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});}if(!inforeport){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}var startSensorIndex=(waveGuide-1)*10+1;var endSensorIndex=waveGuide*10;var data=generateData(inforeport,startSensorIndex,endSensorIndex);var sensorFind=function sensorFind(sensor){var sensorData=[];var updateTime=[];var trimedSensor=sensor.replace(/ /g,\"\");var sensorName=trimedSensor.toLowerCase();for(var index=0;index<inforeport.length;index++){var _inforeport$index2,_inforeport$index3;sensorData[index]=(_inforeport$index2=inforeport[index])===null||_inforeport$index2===void 0?void 0:_inforeport$index2[sensorName];updateTime[index]=(_inforeport$index3=inforeport[index])===null||_inforeport$index3===void 0?void 0:_inforeport$index3.updatedAt;}console.log(updateTime);return{sensorData:sensorData,updateTime:updateTime};};var generateExcel=function generateExcel(item){var _sensorFind=sensorFind(item.sensor),sensorData=_sensorFind.sensorData,updateTime=_sensorFind.updateTime;var data=[[item.sensorName,\"time\"]].concat(_toConsumableArray(sensorData.map(function(Value,index){return[Value,updateTime[index]];})));var workbook=XLSX.utils.book_new();var worksheet=XLSX.utils.aoa_to_sheet(data);XLSX.utils.book_append_sheet(workbook,worksheet,\"sheet1\");XLSX.writeFile(workbook,\"xyma_vedanta.xlsx\");};var generatePdf=function generatePdf(item){var _sensorFind2=sensorFind(item.sensor),sensorData=_sensorFind2.sensorData,updateTime=_sensorFind2.updateTime;var filteredData=sensorData.filter(function(value,index){return value!==undefined&&updateTime[index]!==undefined;});var filteredUpdateTime=updateTime.filter(function(value,index){return value!==undefined&&sensorData[index]!==undefined;});var docDefinition={content:[// {\n//   margin: [0, 0, 0, 0],\n//   columns: [\n//     {\n//       image: logo,\n//       width: 40,\n//     },\n//   ],\n// },\n{canvas:[// Line to separate header and body\n{type:\"line\",x1:0,y1:5,x2:595-2*40,y2:5,lineWidth:0.5}]},{table:{widths:[\"50%\",\"50%\"],headerRows:1,body:[[{text:item.sensorName,bold:true},{text:\"Time\",bold:true}]].concat(_toConsumableArray(filteredData.map(function(value,index){return[value,filteredUpdateTime[index]];})))}}],styles:{header:{fontsize:16,bold:true,marginBottom:10}}};var pdfDocGenerator=pdfMake.createPdf(docDefinition);pdfDocGenerator.getBlob(function(blob){saveAs(blob,item.sensorName+\"_xyma.pdf\");});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"overlay-report\",onClick:Closereportdash}),/*#__PURE__*/_jsx(\"div\",{className:\"report-dash\",children:data.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"box-report-popup\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-base\",children:item.sensorName}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pdf\",onClick:function onClick(){generatePdf(item);},children:[/*#__PURE__*/_jsx(PictureAsPdfIcon,{className:\"icon-report\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"Pdf\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"xl\",onClick:function onClick(){generateExcel(item);},children:[/*#__PURE__*/_jsx(TextSnippetIcon,{className:\"icon-report\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"Excel\"})]})]})]},index);})})]});};export default ReportPopup;","map":{"version":3,"sources":["C:/Users/srini/OneDrive/Desktop/vedenta/vedanta-multi-sensor/src/pages/reports/ReportPopup.jsx"],"names":["React","useState","useEffect","XLSX","pdfMake","pdfFonts","saveAs","PictureAsPdfIcon","TextSnippetIcon","vfs","generateData","inforeport","startSensorIndex","endSensorIndex","data","index","length","i","push","id","sensor","sensorName","updatedAt","ReportPopup","Openreportdash","Closereportdash","waveGuide","setInforeport","error","SetError","fetchData","fetch","response","json","infoVal","message","sensorFind","sensorData","updateTime","trimedSensor","replace","toLowerCase","console","log","generateExcel","item","map","Value","workbook","utils","book_new","worksheet","aoa_to_sheet","book_append_sheet","writeFile","generatePdf","filteredData","filter","value","undefined","filteredUpdateTime","docDefinition","content","canvas","type","x1","y1","x2","y2","lineWidth","table","widths","headerRows","body","text","bold","styles","header","fontsize","marginBottom","pdfDocGenerator","createPdf","getBlob","blob"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport \"../reports/reportpopup.scss\";\r\nimport * as XLSX from \"xlsx\";\r\nimport pdfMake from \"pdfmake/build/pdfmake\";\r\nimport pdfFonts from \"pdfmake/build/vfs_fonts\";\r\nimport { saveAs } from \"file-saver\";\r\n// import logo from \"../../assets/images/download.jpg\";\r\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf';\r\nimport TextSnippetIcon from '@mui/icons-material/TextSnippet';\r\n                                                       \r\n                                                      // class level\r\n// Register fonts for pdfmake\r\npdfMake.vfs = pdfFonts.pdfMake.vfs;\r\n\r\nconst generateData = (inforeport, startSensorIndex, endSensorIndex) => {\r\n  const data = [];\r\n\r\n  for (let index = 0; index < inforeport.length; index++) {\r\n    for (let i = startSensorIndex; i <= endSensorIndex; i++) {\r\n      if(i <= 108) {\r\n        data.push({\r\n        id: `${i}`,\r\n        sensor: `Sensor ${i}`,\r\n        sensorName: `CBT${i}`,\r\n        updatedAt: inforeport[index]?.updatedAt,\r\n      });\r\n      }\r\n    }\r\n    return data;\r\n  }\r\n};\r\n                                                           // function\r\nconst ReportPopup = ({ Openreportdash, Closereportdash, waveGuide }) => {\r\n\r\n  const [inforeport, setInforeport] = useState([]);\r\n  const [error, SetError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await fetch(\"http://localhost:4000/sensor/find\");\r\n        const infoVal = await response.json();\r\n        setInforeport(infoVal);\r\n      } catch (error) {\r\n        SetError(error);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  if (!Openreportdash) {\r\n    return null;\r\n  }\r\n\r\n  if (error) {\r\n    return <div>Error: {error.message}</div>;\r\n  }\r\n\r\n  if (!inforeport) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  const startSensorIndex = (waveGuide - 1) * 10 + 1;\r\n  const endSensorIndex = waveGuide * 10;\r\n\r\n  const data = generateData(inforeport, startSensorIndex, endSensorIndex);\r\n\r\n  const sensorFind = (sensor) => {\r\n    const sensorData = [];\r\n    const updateTime = [];\r\n    const trimedSensor = sensor.replace(/ /g, \"\");\r\n    const sensorName = trimedSensor.toLowerCase();\r\n\r\n    for (let index = 0; index < inforeport.length; index++) {\r\n      sensorData[index] = inforeport[index]?.[sensorName];\r\n      updateTime[index] = inforeport[index]?.updatedAt;\r\n    }\r\n    console.log(updateTime);\r\n    return { sensorData, updateTime };\r\n  };\r\n\r\n  const generateExcel = (item) => {\r\n    const { sensorData, updateTime } = sensorFind(item.sensor);\r\n    const data = [\r\n      [item.sensorName, \"time\"],\r\n      ...sensorData.map((Value, index) => [Value, updateTime[index]]),\r\n    ];\r\n    const workbook = XLSX.utils.book_new();\r\n    const worksheet = XLSX.utils.aoa_to_sheet(data);\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"sheet1\");\r\n    XLSX.writeFile(workbook, \"xyma_vedanta.xlsx\");\r\n  };\r\n\r\n  const generatePdf = (item) => {\r\n    const { sensorData, updateTime } = sensorFind(item.sensor);\r\n\r\n    const filteredData = sensorData.filter(\r\n      (value, index) => value !== undefined && updateTime[index] !== undefined\r\n    );\r\n    const filteredUpdateTime = updateTime.filter(\r\n      (value, index) => value !== undefined && sensorData[index] !== undefined\r\n    );\r\n\r\n    const docDefinition = {\r\n      content: [\r\n        // {\r\n        //   margin: [0, 0, 0, 0],\r\n        //   columns: [\r\n        //     {\r\n        //       image: logo,\r\n        //       width: 40,\r\n        //     },\r\n        //   ],\r\n        // },\r\n        {\r\n          canvas: [\r\n            // Line to separate header and body\r\n            {\r\n              type: \"line\",\r\n              x1: 0,\r\n              y1: 5,\r\n              x2: 595 - 2 * 40,\r\n              y2: 5,\r\n              lineWidth: 0.5,\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          table: {\r\n            widths: [\"50%\", \"50%\"],\r\n            headerRows: 1,\r\n            body: [\r\n              [\r\n                { text: item.sensorName, bold: true },\r\n                { text: \"Time\", bold: true },\r\n              ],\r\n              ...filteredData.map((value, index) => [\r\n                value,\r\n                filteredUpdateTime[index],\r\n              ]),\r\n            ],\r\n          },\r\n        },\r\n      ],\r\n      styles: {\r\n        header: {\r\n          fontsize: 16,\r\n          bold: true,\r\n          marginBottom: 10,\r\n        },\r\n      },\r\n    };\r\n    const pdfDocGenerator = pdfMake.createPdf(docDefinition);\r\n    pdfDocGenerator.getBlob((blob) => {\r\n      saveAs(blob, item.sensorName + \"_xyma.pdf\");\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"overlay-report\" onClick={Closereportdash} />\r\n\r\n      <div className=\"report-dash\">\r\n        {data.map((item, index) => {\r\n          return (\r\n            <div className=\"box-report-popup\" key={index}>\r\n               \r\n              <span className=\"text-base\">{item.sensorName}</span>\r\n              <div className=\"btn\">\r\n                <div className=\"pdf\" onClick={()=>{generatePdf(item)}}>\r\n                  <PictureAsPdfIcon className=\"icon-report\"/>\r\n                  <span className=\"text-xs\">Pdf</span>\r\n                </div>\r\n                <div className=\"xl\" onClick={()=>{generateExcel(item)}}>\r\n                  <TextSnippetIcon className=\"icon-report\"/>\r\n                  <span className=\"text-xs\">Excel</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ReportPopup;\r\n"]},"metadata":{},"sourceType":"module"}